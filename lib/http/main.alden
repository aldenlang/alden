# testing the http module
class Http(url, headers, body)
    task init(self)
        if self.url == "http://www.google.com":
            self.type = "GET"
        end
        self.check_type()
    end
    task check_type(self)
        if self.type == "GET":
            # do something
            print()
        elif self.type == "POST":
            # do something
            print()
        else:
            print("Invalid type")
        end
    end
    task post(self)
        println("POST", self.url.split("://"), self.headers, self.body)
        self.test("POST")
        return self
    end
    
    task get_(self)
        println("GET", self.url, self.headers, self.body)
    end

    task put(self)
        println("PUT", self.url, self.headers, self.body)
    end

    task delete(self)
        println("DELETE", self.url, self.headers, self.body)
    end

    task test(self, name)
        println(fm"Hello from %{name}. The url is %{self.url}")
    end

    task repr(self)
        println(fm"Http(url='%{self.url}', headers='%{self.headers}', body=%{self.body})")
    end

    task to(self)
        return self
    end
end


module Export as Http
    new: Http
end

let http = Http("http://www.google.com", "application/json", {
    name: "Bob",
    age: "42"
})
println(http.post())

